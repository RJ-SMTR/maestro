resources:
  basedosdados_config:
    config:
      table_id: rho5_registros_stpl
      dataset_id: br_rj_riodejaneiro_rdo
  timezone_config:
    config:
      timezone: "America/Sao_Paulo"
  discord_webhook:
    config:
      url: "{{ '' | env_override('SPPO_DISCORD_WEBHOOK') }}"
      success_cron: "* * * * *"
solids:
  paths:
    ftp_path: SPPO/ARQUIVO.TXT # Replaced in runtime
    local_path: /tmp/ARQUIVO.TXT # Replaced in runtime
    bucket_path: raw/br_rj_riodejaneiro_rdo/rho5_registros_stpl/ano=2021/mes=01/dia=07/RDO_00638_00001_20210307_20210312_045044.csv # Replaced in runtime
    partitions: True # Replaced in runtime
  aux_get_list:
    paths:
      bucket_path: raw/br_rj_riodejaneiro_rdo/aux_riocard_permissionarios/2021-12-16.csv
      partitions: False
      table_id: aux_riocard_permissionarios
      dataset_id: br_rj_riodejaneiro_rdo
    read_csv_kwargs:
      delimiter: ","
      index_col: "CD_OPERAD"
      usecols:
        - "CD_OPERAD"
        - "CODIGO"
        - "MODAL"
    transform:
      filter:
        MODAL: "VANS_MUNIC"
      column_to_dict: "CODIGO"
  upload_to_datalake:
    modes:
        - staging
  load_and_transform_csv:
    read_csv_kwargs:
      delimiter: ";"
      index_col: false
    map:
      operadora: codigo
    reindex_columns:
      - operadora
      - linha
      - data_transacao
      - hora_transacao
      - total_gratuidades
      - total_pagantes
      - codigo